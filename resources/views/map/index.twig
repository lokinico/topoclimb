{% extends "layouts/app.twig" %}

{% block title %}Carte Test - Escalade Suisse{% endblock %}

{% block meta %}
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
    /* CSS MINIMAL - ZERO CONFLITS - OVERRIDE BOOTSTRAP */
    .container-fluid { padding: 0 !important; }
    .main-content { padding: 0 !important; margin: 0 !important; }
    
    #map { 
        height: 100vh; 
        width: 100%; 
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1;
    }
    
    .debug { 
        position: fixed; 
        top: 10px; 
        left: 10px; 
        background: red; 
        color: white; 
        padding: 10px; 
        z-index: 9999;
        font-weight: bold;
    }
    
    /* Cacher le header/footer pour avoir la carte pleine page */
    .utility-bar, .main-nav, .site-footer { display: none !important; }
    </style>
{% endblock %}

{% block content %}
<!-- CARTE SIMPLE - DANS LE SYST√àME TWIG -->
<div id="map"></div>

<!-- Debug -->
<div class="debug">
    üó∫Ô∏è CARTE TWIG TEST<br>
    Status: <span id="status">Initialisation...</span>
</div>
{% endblock %}

{% block scripts %}
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// VERSION BASIQUE DANS LE SYST√àME TWIG
console.log('üó∫Ô∏è VERSION TWIG BASIQUE');

document.addEventListener('DOMContentLoaded', function() {
    const status = document.getElementById('status');
    
    try {
        status.textContent = 'Cr√©ation carte...';
        console.log('Cr√©ation carte...');
        
        // Carte standard Leaflet
        const map = L.map('map').setView([46.8182, 8.2275], 8);
        
        status.textContent = 'Ajout tuiles...';
        console.log('Ajout tuiles...');
        
        // Tuiles OpenStreetMap standard
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '¬© OpenStreetMap'
        }).addTo(map);
        
        status.textContent = 'Ajout marqueur test...';
        console.log('Ajout marqueur...');
        
        // Un marqueur test sur Saillon
        L.marker([46.1817, 7.1947])
            .addTo(map)
            .bindPopup('üèîÔ∏è Saillon - Site d\'escalade TWIG')
            .openPopup();
        
        status.textContent = '‚úÖ Carte TWIG OK !';
        console.log('‚úÖ Carte TWIG cr√©√©e avec succ√®s');
        
    } catch (error) {
        console.error('ERREUR TWIG:', error);
        status.textContent = 'ERREUR: ' + error.message;
    }
});
</script>
{% endblock %}